{% extends "base.html" %}
{% block content %}

<h3 class="mb-3">Your Profile</h3>
<p class="text-secondary mb-4">
  FitAI uses this data to calculate BMI, BMR, calories and to build your workout & diet plan.
</p>

<form method="post" class="row g-3">

  <div class="col-md-3">
    <label class="form-label">Age</label>
    <input
      type="number"
      name="age"
      class="form-control"
      min="10"
      max="90"
      required
      value="{{ profile.age if profile else '' }}"
    >
  </div>

  <div class="col-md-3">
    <label class="form-label">Gender</label>
    <select name="gender" class="form-select" required>
      {% set g = profile.gender if profile else '' %}
      <option value="male"   {% if g == "male" %}selected{% endif %}>Male</option>
      <option value="female" {% if g == "female" %}selected{% endif %}>Female</option>
    </select>
  </div>

  <div class="col-md-3">
    <label class="form-label">Height (cm)</label>
    <input
      type="number"
      name="height"
      class="form-control"
      min="120"
      max="230"
      step="0.1"
      required
      value="{{ profile.height_cm if profile else '' }}"
    >
  </div>

  <div class="col-md-3">
    <label class="form-label">Weight (kg)</label>
    <input
      type="number"
      name="weight"
      class="form-control"
      min="30"
      max="200"
      step="0.1"
      required
      value="{{ profile.weight_kg if profile else '' }}"
    >
  </div>

  <div class="col-md-6">
    <label class="form-label">Activity Level</label>
    {% set a = profile.activity_level if profile else '' %}
    <select name="activity" class="form-select" required>
      <option value="sedentary"   {% if a == "sedentary" %}selected{% endif %}>Sedentary (little or no exercise)</option>
      <option value="light"       {% if a == "light" %}selected{% endif %}>Light (1–3 days/week)</option>
      <option value="moderate"    {% if a == "moderate" %}selected{% endif %}>Moderate (3–5 days/week)</option>
      <option value="very_active" {% if a == "very_active" %}selected{% endif %}>Very Active (6–7 days/week)</option>
      <option value="athlete"     {% if a == "athlete" %}selected{% endif %}>Athlete / intense training</option>
    </select>
  </div>

  <div class="col-md-6">
    <label class="form-label">Goal</label>
    {% set goal = profile.goal if profile else '' %}
    <select name="goal" class="form-select" required>
      <option value="lose"     {% if goal == "lose" %}selected{% endif %}>Lose fat</option>
      <option value="maintain" {% if goal == "maintain" %}selected{% endif %}>Maintain weight</option>
      <option value="gain"     {% if goal == "gain" %}selected{% endif %}>Gain muscle / weight</option>
    </select>
  </div>

  <!-- NEW: Experience level -->
  <div class="col-12">
    <label class="form-label">Workout Experience</label>
    <p class="small text-secondary mb-2">
      This controls how aggressive your training is and how your weekly split is structured.
    </p>

    {% set lvl = profile.experience_level if profile and profile.experience_level else "beginner" %}

    <div class="d-flex flex-wrap gap-3">
      <div class="form-check">
        <input
          class="form-check-input"
          type="radio"
          id="expBeginner"
          name="experience_level"
          value="beginner"
          {% if lvl == "beginner" %}checked{% endif %}
        >
        <label class="form-check-label" for="expBeginner">
          Beginner – less than 6 months
        </label>
      </div>

      <div class="form-check">
        <input
          class="form-check-input"
          type="radio"
          id="expIntermediate"
          name="experience_level"
          value="intermediate"
          {% if lvl == "intermediate" %}checked{% endif %}
        >
        <label class="form-check-label" for="expIntermediate">
          Intermediate – 6–24 months
        </label>
      </div>

      <div class="form-check">
        <input
          class="form-check-input"
          type="radio"
          id="expAdvanced"
          name="experience_level"
          value="advanced"
          {% if lvl == "advanced" %}checked{% endif %}
        >
        <label class="form-check-label" for="expAdvanced">
          Advanced – 2+ years of training
        </label>
      </div>
    </div>
  </div>

  <div class="col-12 text-end mt-3">
    <button class="btn btn-warning px-4">
      Save Profile &amp; Regenerate Plan
    </button>
  </div>
</form>

{% endblock %}

{% extends "base.html" %}
{% block content %}

<div class="row justify-content-center">
  <div class="col-lg-7 col-md-10">
    <div class="card glass-card trainer-card">
      <div class="trainer-header">
        <h3 class="mb-1">FitAI Coach</h3>
        <p class="small mb-0 text-secondary">
          Ask anything about your diet, workouts, or progress. Iâ€™ll answer using your latest plan.
        </p>
      </div>

      <!-- Chat window -->
      <div id="trainerChat" class="trainer-chat-window">
        <!-- Initial bot message -->
        <div class="trainer-msg trainer-msg-bot">
          <div class="trainer-avatar">ğŸ¤–</div>
          <div class="trainer-bubble">
            <strong>Hey {{ current_user.name if current_user else "there" }} ğŸ‘‹</strong><br>
            Iâ€™m your FitAI Coach.<br><br>
            You can ask things like:
            <ul class="mb-0">
              <li>â€œHow many calories should I eat per day?â€</li>
              <li>â€œSuggest todayâ€™s meals based on my plan.â€</li>
              <li>â€œGive me a fatâ€‘loss workout for today.â€</li>
            </ul>
          </div>
        </div>
      </div>

      <!-- Quick suggestion chips -->
      <div class="trainer-quick-row">
        <button type="button"
                class="trainer-chip"
                data-message="How many calories should I eat per day?">
          Calories for me
        </button>
        <button type="button"
                class="trainer-chip"
                data-message="Suggest a full day of meals based on my current plan.">
          Suggest meals
        </button>
        <button type="button"
                class="trainer-chip"
                data-message="Give me todayâ€™s workout based on my plan.">
          Todayâ€™s workout
        </button>
        <button type="button"
                class="trainer-chip"
                data-message="How fast should I lose fat safely?">
          Fatâ€‘loss tips
        </button>
      </div>

      <!-- Input row -->
      <form id="trainerForm" class="trainer-input-row" autocomplete="off">
        <button type="button" id="trainerMicBtn" class="trainer-mic-btn" title="Voice input">
          ğŸ¤
        </button>

        <input
          id="trainerInput"
          type="text"
          class="trainer-input"
          placeholder="Ask your coach anythingâ€¦"
          maxlength="300"
          autocomplete="off"
          required
        >

        <button type="submit" id="trainerSendBtn" class="btn btn-warning trainer-send-btn">
          Send
        </button>
      </form>

      <p class="trainer-footer small mb-0 text-secondary">
        Tip: Your coach uses your latest profile and generated plan. Update your profile if your weight or goal changed.
      </p>
    </div>
  </div>
</div>

<!-- Pageâ€‘specific script -->
<script src="{{ url_for('static', filename='js/trainer.js') }}"></script>

{% endblock %}
